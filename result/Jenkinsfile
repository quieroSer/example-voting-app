pipeline{

  agent{
    docker{
      image 'node:8.16.0-alpine'
    }
  }


  stages{
    stage('build'){
      when{
        changeset "**/result/**"
      }
      steps{
        echo "compiling result app"
        dir('result'){
          sh 'npm install'
        }
      }
    }

    stage('test'){
      when{
        changeset "**/result/**"
      }
      steps{
        echo 'running unit tests on result app'
        dir('result'){
          sh 'npm install'
          sh 'npm test'
        }
      }
    }
  }

  post{
    always{
      echo 'pipeline for results complete'
    }
  }
}
